{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#quickstart","title":"Quickstart","text":""},{"location":"#introduction","title":"Introduction","text":"<p>TODO</p>"},{"location":"#installing-rohe","title":"Installing ROHE","text":"<p>ROHE currently supports Python 3.10 and above.</p>"},{"location":"#pip","title":"Pip","text":"<p>We recommend creating a virtual environment for your project when installing ROHE.</p> <p>For more information on setting up a virtual environment, see the official Python documentation for virtual environments.</p> <p>Once you have your environment set up, you can install the latest version of ROHE with:</p> <pre><code>pip install rohe\n</code></pre>"},{"location":"#conda","title":"Conda","text":"<p>We currently haven't supported installing from conda yet</p>"},{"location":"#example","title":"Example","text":"<p>TODO</p>"},{"location":"#architecture","title":"Architecture","text":""},{"location":"#high-level-view","title":"High-level view","text":""},{"location":"#orchestration","title":"Orchestration","text":"<p>TODO</p>"},{"location":"#observation","title":"Observation","text":"<p>TODO</p>"},{"location":"#enable-rohe-cli-auto-completion","title":"Enable rohe-cli auto-completion","text":"BashZshFish <p>Save the script somewhere. <pre><code>_ROHE_CLI_COMPLETE=bash_source rohe-cli &gt; ~/.rohe-cli-complete.bash\n</code></pre> Source the file in ~/.bashrc. <pre><code>source ~/.rohe-cli-complete.bash\n</code></pre></p> <p>Save the script somewhere. <pre><code>_ROHE_CLI_COMPLETE=zsh_source rohe-cli &gt; ~/.rohe-cli-complete.zsh\n</code></pre> Source the file in ~/.zshrc. <pre><code>source ~/.rohe-cli-complete.zsh\n</code></pre></p> <p>Save the script to ~/.config/fish/completions/rohe-cli.fish: <pre><code>_ROHE_CLI_COMPLETE=fish_source rohe-cli &gt; ~/.config/fish/completions/rohe-cli.fish\n</code></pre></p>"},{"location":"#reference","title":"Reference","text":"<p>If you use the software, you can cite</p> <pre><code>@software{site:rohe,\nauthor = {Minh-Tri Nguyen and Hong-Linh Truong},\nlicense = {Apache-2.0},\nmonth = Dec,\ntitle = {{ROHE: An Orchestration Framework for End-to-End Machine Learning Serving with Resource Optimization on Heterogeneous Edge}},\nurl = {https://github.com/rdsea/ROHE},\nyear = {2023}\n}\n</code></pre>"},{"location":"#authorscontributors","title":"Authors/Contributors","text":"<ul> <li>Minh-Tri Nguyen</li> <li>Hong-Linh Truong</li> <li>Vuong Nguyen</li> <li>Anh-Dung Nguyen</li> </ul>"},{"location":"EdgeCloudK3s/","title":"Elastic Machine Learning Serving across edge-cloud environment","text":"<p>This project contains information about setup experiment for edge-cloud ML serving</p>"},{"location":"EdgeCloudK3s/#system-deployment","title":"System deployment","text":"<ul> <li>OS:</li> <li>Ubuntu 21.04 for Raspberry Pi could be found here</li> <li>Ubuntu (default image)</li> </ul> <p> Fig.1 - Edge Cluster - Raspberry Pi &amp; Jetson Boards </p> <ul> <li>Install Docker and other packages <code>system_setup/setup.sh</code></li> </ul>"},{"location":"EdgeCloudK3s/#edge-kubernetes","title":"Edge Kubernetes","text":""},{"location":"EdgeCloudK3s/#k3s-deployment","title":"K3s Deployment","text":"<ul> <li>Cluster setup is described here</li> </ul>"},{"location":"EdgeCloudK3s/#applicationservice-deployment","title":"Application/Service Deployment","text":"<ul> <li>Categorize resources (nodes) with different features using label</li> <li>CPU</li> <li>Memory</li> <li>GPU</li> <li>Other specifications</li> <li>Assign pods/services using node selector</li> </ul> <pre><code>$ sudo kubectl label nodes &lt;node-name&gt; &lt;label-key&gt;=&lt;label-value&gt;\n</code></pre> <ul> <li>Add the <code>nodeSelector</code>in any config file, for example:</li> </ul> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\n  labels:\n    env: test\nspec:\n  containers:\n    - name: nginx\n      image: nginx\n      imagePullPolicy: IfNotPresent\n  nodeSelector:\n    disktype: ssd\n</code></pre> <ul> <li>Other methods:</li> <li>interlude: built-in node lable</li> <li>Node isolation/restriction</li> <li>Affinity and anti-affinity</li> </ul>"},{"location":"Jetson/","title":"For Jetson GPU device","text":"<p>Set default <code>runtime</code> to <code>nvidia</code> in <code>/etc/docker/daemon.json</code></p> <p><pre><code>{\n  \"runtimes\": {\n    \"nvidia\": {\n      \"path\": \"/usr/bin/nvidia-container-runtime\",\n      \"runtimeArgs\": []\n    }\n  },\n  \"default-runtime\": \"nvidia\"\n}\n</code></pre> Restart Docker daemon: <pre><code>$ sudo systemctl restart docker\n</code></pre> Build an image for manage gpu as a plugin (read more) only each GPU node. The main release only support AMD, to make it works on arm64, we need to build with other patches below:</p> <p><pre><code>$ git clone -b 1.0.0-beta6 https://github.com/nvidia/k8s-device-plugin.git\n$ cd k8s-device-plugin\n$ wget https://labs.windriver.com/downloads/0001-arm64-add-support-for-arm64-architectures.patch\n$ wget https://labs.windriver.com/downloads/0002-nvidia-Add-support-for-tegra-boards.patch\n$ wget https://labs.windriver.com/downloads/0003-main-Add-support-for-tegra-boards.patch\n$ git am 000*.patch\n</code></pre> Build docker image locally on each GPU node: <pre><code>$ sudo docker build -t nvidia/k8s-device-plugin:1.0.0-beta6 -f docker/arm64/Dockerfile.ubuntu16.04 .\n</code></pre> On master node, apply the plugin: <pre><code>$ sudo kubectl apply -f nvidia-device-plugin.yml\n</code></pre> Show plugin deployment: <pre><code>$ sudo kubectl get pods -A\n</code></pre> If it works correctly, we can log the pods as follow <pre><code>$ sudo kubectl logs nvidia-device-plugin-daemonset-&lt;random_code&gt; --namespace=kube-system\n</code></pre></p> <p>Or describe node: <pre><code>$ sudo kubectl describe node &lt;name_node&gt;\n</code></pre> Output: <pre><code>...\nAllocated resources:\n  (Total limits may be over 100 percent, i.e., overcommitted.)\n  Resource           Requests   Limits\n  --------           --------   ------\n  cpu                100m (2%)  0 (0%)\n  memory             70Mi (1%)  170Mi (4%)\n  ephemeral-storage  0 (0%)     0 (0%)\n  hugepages-2Mi      0 (0%)     0 (0%)\n  nvidia.com/gpu     0          0\n...\n</code></pre></p>"},{"location":"Rohe%20cli/","title":"CLI Reference","text":"<p>This page provides documentation for our command line tools.</p>"},{"location":"Rohe%20cli/#rohe-cli","title":"rohe-cli","text":"<p>CLI group for ROHE commands.</p> <p>Usage:</p> <pre><code>rohe-cli [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> Name Type Description Default <code>--version</code> boolean Show the version and exit. <code>False</code> <code>--help</code> boolean Show this message and exit. <code>False</code> <p>Subcommands</p> <ul> <li>observation: Group for observation related commands.</li> <li>orchestration: Group for orchestration related commands.</li> <li>start: Group for starting services.</li> </ul>"},{"location":"Rohe%20cli/#rohe-cli-observation","title":"rohe-cli observation","text":"<p>Group for observation related commands.</p> <p>Usage:</p> <pre><code>rohe-cli observation [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> Name Type Description Default <code>--help</code> boolean Show this message and exit. <code>False</code> <p>Subcommands</p> <ul> <li>delete-app: </li> <li>register-app: </li> <li>start_agent: </li> <li>stop_agent: </li> </ul>"},{"location":"Rohe%20cli/#rohe-cli-observation-delete-app","title":"rohe-cli observation delete-app","text":"<p>Delete an application from the observation service.</p> <p>Usage:</p> <pre><code>rohe-cli observation delete-app [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--app</code> text Application name <code>dummy</code> <code>--run</code> text Experiment name <code>experiment1</code> <code>--user</code> text User name <code>aaltosea1</code> <code>--url</code> text Registration URL <code>http://localhost:5010/agent/delete</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-observation-register-app","title":"rohe-cli observation register-app","text":"<p>Register an application with the observation service.</p> <p>Usage:</p> <pre><code>rohe-cli observation register-app [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--app</code> text Application name <code>test</code> <code>--run</code> text Experiment name/id <code>experiment2</code> <code>--user</code> text User name <code>aaltosea1</code> <code>--url</code> text Registration URL <code>http://localhost:5010/registration</code> <code>--output_dir</code> text Output directory. Ensure the directory exists. None <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-observation-start_agent","title":"rohe-cli observation start_agent","text":"<p>Start an observation agent.</p> <p>Usage:</p> <pre><code>rohe-cli observation start_agent [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--app</code> text Application name <code>dummy</code> <code>--conf</code> text Configuration path None <code>--url</code> text Registration URL <code>http://localhost:5010/agent</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-observation-stop_agent","title":"rohe-cli observation stop_agent","text":"<p>Stop an observation agent.</p> <p>Usage:</p> <pre><code>rohe-cli observation stop_agent [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--app</code> text Application name <code>dummy</code> <code>--url</code> text Registration URL <code>http://localhost:5010/agent/start</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration","title":"rohe-cli orchestration","text":"<p>Group for orchestration related commands.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> Name Type Description Default <code>--help</code> boolean Show this message and exit. <code>False</code> <p>Subcommands</p> <ul> <li>add-node: </li> <li>add-node-from-file: </li> <li>add-service-from-file: </li> <li>get-node: </li> <li>get-service: </li> <li>remove-all-nodes: </li> <li>remove-all-services: </li> <li>start_agent: </li> <li>stop_agent: </li> </ul>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-add-node","title":"rohe-cli orchestration add-node","text":"<p>Interactive adding new node to the orchestration service.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration add-node [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-add-node-from-file","title":"rohe-cli orchestration add-node-from-file","text":"<p>Add a list of nodes to the orchestration service defined in file.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration add-node-from-file [OPTIONS] FILE_PATH\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Node management URL <code>http://localhost:5002/management/add-node</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-add-service-from-file","title":"rohe-cli orchestration add-service-from-file","text":"<p>Add a list of services to the orchestration service defined in file.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration add-service-from-file [OPTIONS] FILE_PATH\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Service management URL <code>http://localhost:5002/management/add-service</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-get-node","title":"rohe-cli orchestration get-node","text":"<p>Retrieve all nodes from the orchestration service.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration get-node [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Node management URL <code>http://localhost:5002/management/get-all-nodes</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-get-service","title":"rohe-cli orchestration get-service","text":"<p>Retrieve all services from the orchestration service.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration get-service [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Service management URL <code>http://localhost:5002/management/get-all-services</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-remove-all-nodes","title":"rohe-cli orchestration remove-all-nodes","text":"<p>Remove all nodes from the orchestration service.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration remove-all-nodes [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Node management URL <code>http://localhost:5002/management/remove-all-nodes</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-remove-all-services","title":"rohe-cli orchestration remove-all-services","text":"<p>Remove all services from the orchestration service.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration remove-all-services [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Service management URL <code>http://localhost:5002/management/remove-all-services</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-start_agent","title":"rohe-cli orchestration start_agent","text":"<p>Start the orchestration agent.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration start_agent [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Agent management URL <code>http://localhost:5002/management/start-agent</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-orchestration-stop_agent","title":"rohe-cli orchestration stop_agent","text":"<p>Stop the orchestration agent.</p> <p>Usage:</p> <pre><code>rohe-cli orchestration stop_agent [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--url</code> text Agent management URL <code>http://localhost:5002/management/stop-agent</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-start","title":"rohe-cli start","text":"<p>Group for starting services.</p> <p>Usage:</p> <pre><code>rohe-cli start [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> Name Type Description Default <code>--help</code> boolean Show this message and exit. <code>False</code> <p>Subcommands</p> <ul> <li>observation-service: </li> <li>orchestration-service: </li> </ul>"},{"location":"Rohe%20cli/#rohe-cli-start-observation-service","title":"rohe-cli start observation-service","text":"<p>Start the observation service.</p> <p>Usage:</p> <pre><code>rohe-cli start observation-service [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--debug</code> boolean Run the Flask development server if set, otherwise run Gunicorn <code>False</code> <code>-h</code>, <code>--host</code> text Host to bind the server to <code>0.0.0.0</code> <code>-p</code>, <code>--port</code> integer Port to bind the server to <code>5010</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"Rohe%20cli/#rohe-cli-start-orchestration-service","title":"rohe-cli start orchestration-service","text":"<p>Start the orchestration service.</p> <p>Usage:</p> <pre><code>rohe-cli start orchestration-service [OPTIONS]\n</code></pre> <p>Options:</p> Name Type Description Default <code>--debug</code> boolean Run the Flask development server if set, otherwise run Gunicorn <code>False</code> <code>-h</code>, <code>--host</code> text Host to bind the server to <code>0.0.0.0</code> <code>-p</code>, <code>--port</code> integer Port to bind the server to <code>5002</code> <code>--help</code> boolean Show this message and exit. <code>False</code>"},{"location":"dev%20note/","title":"Dev note","text":""},{"location":"dev%20note/#tools-that-we-use","title":"Tools that we use","text":"<ul> <li>Poetry: package and dependency management</li> <li>bytewax: stream processing in python</li> <li>Click: package to create python cli</li> <li>Ruff: linter and formatter</li> <li>Pre-commit: add hooks that will run before you commit</li> <li>mypy: static type check</li> <li>mkdocs-material: documentation webpage</li> </ul>"},{"location":"dev%20note/#standards","title":"Standards","text":"<p>Follows guide at scientific-python</p>"},{"location":"dev%20note/#serialization","title":"Serialization","text":"<ul> <li>model_dump doesn't convert enum to its value. However, by using IntEnum or StrEnum, the enum can be serialized</li> </ul>"},{"location":"dev%20note/#pep","title":"PEP","text":"<ul> <li>PEP 585: use list, dict instead of List, Dict</li> <li>PEP 604: use X | Y insated of Union[X,Y]</li> </ul>"},{"location":"dev%20note/#k8s-models","title":"K8s models","text":"<p>k8s python client has model auto generated from the openapi spec but is not in pydantic</p>"}]}